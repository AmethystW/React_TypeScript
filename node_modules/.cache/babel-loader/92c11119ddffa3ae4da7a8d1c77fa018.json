{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\51651\\\\Desktop\\\\ReactTypescript\\\\demo\\\\src\\\\components\\\\videoBox.tsx\";\nimport React from 'react';\nimport Video from './video';\nexport default class VideoBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      position: 0,\n      width: document.body.clientWidth,\n      items: [],\n      videonum: 0\n    };\n    this.clickHandler = this.clickHandler.bind(this);\n    this.clickLeft = this.clickLeft.bind(this);\n    this.clickRight = this.clickRight.bind(this);\n  }\n\n  clickHandler() {\n    var filelist = \"\"; //获取uploads下文件列表\n\n    var xhr = new XMLHttpRequest();\n    xhr.open(\"get\", \"http://127.0.0.1:8080/uploads\", false);\n\n    xhr.onload = function () {\n      if (xhr.readyState === 4 && xhr.status === 200) {\n        filelist = xhr.responseText;\n        console.log(filelist);\n      }\n    };\n\n    xhr.send();\n    var num = filelist.split(\".\").length - 1; //判断传回的字符串中有多少个后缀，即有多少文件（后端文件存储名为顺序数字）\n\n    console.log(num);\n    var itemstemp = [];\n    var autoplay;\n\n    for (var i = 1; i <= num; i++) {\n      var id = \"videoplay\" + i;\n      var src = \"http://127.0.0.1:8080/uploads/\" + i;\n\n      if (i === 1) {\n        autoplay = true;\n      } else {\n        autoplay = false;\n      }\n\n      itemstemp.push(React.createElement(Video, {\n        key: i,\n        id: id,\n        autoplay: autoplay,\n        src: src,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }));\n    }\n\n    this.setState({\n      items: itemstemp,\n      videonum: num\n    });\n  }\n\n  clickLeft() {\n    var id = 0;\n    var ulist = document.getElementById(\"videobox\");\n\n    if (this.state.position !== 0) {\n      var mov = this.state.position - this.state.width;\n      this.setState({\n        position: mov\n      });\n      ulist.scrollTo(mov, 0);\n\n      for (var i = 0; i < this.state.videonum; i++) {\n        if (mov === this.state.width * i) {\n          id = i + 1;\n        }\n      }\n\n      for (var j = 1; j < this.state.videonum; j++) {\n        if (id !== 0) {\n          var videoid = \"videoplay\" + i;\n          var video = document.getElementById(videoid);\n          console.log(id);\n\n          if (id === i) {\n            video.play();\n          } else {\n            video.pause();\n          }\n        }\n      }\n    }\n  }\n\n  clickRight() {\n    var ulist = document.getElementById(\"videobox\");\n\n    if (this.state.position !== this.state.width * (this.state.videonum - 1)) {\n      var id = 0;\n      var mov = this.state.position + this.state.width;\n      this.setState({\n        position: mov\n      });\n      ulist.scrollTo(mov, 0);\n\n      for (var i = 0; i < this.state.videonum; i++) {\n        if (mov === this.state.width * i) {\n          id = i + 1;\n        }\n      }\n\n      for (var j = 1; j < this.state.videonum; j++) {\n        if (id !== 0) {\n          var videoid = \"videoplay\" + i;\n          var video = document.getElementById(videoid);\n          console.log(id);\n\n          if (id === i) {\n            video.play();\n          } else {\n            video.pause();\n          }\n        }\n      }\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.clickHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"\\u52A0\\u8F7D\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      id: \"videobox\",\n      style: {\n        marginLeft: \"0\",\n        overflowX: \"hidden\",\n        listStyle: \"none\",\n        width: \"100%\",\n        whiteSpace: \"nowrap\",\n        position: \"absolute\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, this.state.items), React.createElement(\"div\", {\n      style: {\n        position: \"relative\",\n        width: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.clickLeft,\n      style: {\n        position: \"absolute\",\n        left: \"0px\",\n        top: \"150px\",\n        width: \"20px\",\n        height: \"40px\",\n        borderStyle: \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"\\u25C0\"), React.createElement(\"button\", {\n      onClick: this.clickRight,\n      style: {\n        position: \"absolute\",\n        right: \"0px\",\n        top: \"150px\",\n        width: \"20px\",\n        height: \"40px\",\n        borderStyle: \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"\\u25B6\"))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/51651/Desktop/ReactTypescript/demo/src/components/videoBox.tsx"],"names":["React","Video","VideoBox","Component","constructor","props","state","position","width","document","body","clientWidth","items","videonum","clickHandler","bind","clickLeft","clickRight","filelist","xhr","XMLHttpRequest","open","onload","readyState","status","responseText","console","log","send","num","split","length","itemstemp","autoplay","i","id","src","push","setState","ulist","getElementById","mov","scrollTo","j","videoid","video","play","pause","render","marginLeft","overflowX","listStyle","whiteSpace","left","top","height","borderStyle","right"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Video from './video';\r\n\r\ninterface Istate{\r\n    position:number\r\n    width:number\r\n    items:JSX.Element[]\r\n    videonum:number\r\n}\r\n\r\n\r\nexport default class VideoBox extends React.Component<any,Istate>{\r\n    public constructor(props:any) {\r\n      super(props);\r\n      this.clickHandler = this.clickHandler.bind(this);\r\n      this.clickLeft = this.clickLeft.bind(this);\r\n      this.clickRight = this.clickRight.bind(this);\r\n    }\r\n\r\n    public state:Readonly<Istate>={\r\n        position:0,\r\n        width:document.body.clientWidth,\r\n        items:[],\r\n        videonum:0\r\n    }\r\n    \r\n    public clickHandler(){\r\n        var filelist=\"\"         //获取uploads下文件列表\r\n        var xhr = new XMLHttpRequest(); \r\n        xhr.open(\"get\", \"http://127.0.0.1:8080/uploads\", false); \r\n        xhr.onload = function () {\r\n            if (xhr.readyState === 4 && xhr.status === 200) {\r\n                filelist=xhr.responseText\r\n                console.log(filelist);\r\n            }\r\n        };\r\n        xhr.send();\r\n\r\n        var num=filelist.split(\".\").length-1;   //判断传回的字符串中有多少个后缀，即有多少文件（后端文件存储名为顺序数字）\r\n        console.log(num);\r\n\r\n        var itemstemp=[]\r\n        var autoplay:boolean\r\n        for(var i=1;i<=num;i++){\r\n            var id=\"videoplay\"+i\r\n            var src = \"http://127.0.0.1:8080/uploads/\"+i\r\n            if(i===1){\r\n                autoplay=true\r\n            }\r\n            else{\r\n                autoplay=false\r\n            }\r\n            itemstemp.push(<Video key={i} id={id} autoplay={autoplay} src={src}/>)\r\n        }\r\n        this.setState({\r\n            items:itemstemp,\r\n            videonum:num\r\n        })\r\n        \r\n\r\n    }\r\n\r\n    public clickLeft(){\r\n        var id=0\r\n        var ulist = document.getElementById(\"videobox\") as HTMLUListElement\r\n        if(this.state.position!==0){\r\n            var mov=this.state.position-this.state.width\r\n            this.setState({\r\n                position:mov\r\n            })\r\n            ulist.scrollTo(mov,0)\r\n            for(var i=0;i<this.state.videonum;i++){\r\n                if(mov===this.state.width*i){\r\n                    id = i+1\r\n                }\r\n            }\r\n\r\n            for(var j=1;j<this.state.videonum;j++){\r\n                if(id!==0){\r\n                    var videoid = \"videoplay\"+i\r\n                    var video = document.getElementById(videoid) as HTMLVideoElement\r\n                    console.log(id);\r\n                    if(id===i){\r\n                        video.play()\r\n                    }\r\n                    else{\r\n                        video.pause()\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    public clickRight(){\r\n        var ulist = document.getElementById(\"videobox\") as HTMLUListElement        \r\n        if(this.state.position!==this.state.width*(this.state.videonum-1)){\r\n            var id=0\r\n            var mov=this.state.position+this.state.width\r\n            this.setState({\r\n                position:mov\r\n            })\r\n            ulist.scrollTo(mov,0)\r\n            for(var i=0;i<this.state.videonum;i++){\r\n                if(mov===this.state.width*i){\r\n                    id = i+1\r\n                }\r\n            }\r\n            for(var j=1;j<this.state.videonum;j++){\r\n                if(id!==0){\r\n                    var videoid = \"videoplay\"+i\r\n                    var video = document.getElementById(videoid) as HTMLVideoElement\r\n                    console.log(id);\r\n                    if(id===i){\r\n                        video.play()\r\n                    }\r\n                    else{\r\n                        video.pause()\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public render() {\r\n        return (\r\n            <div>\r\n                <div>\r\n                    {/* 读取本地文件并播放 */}\r\n                    {/* <p>请在下方选择本地视频：</p>\r\n                    <input id=\"videofile\" type=\"file\" multiple/>\r\n                    <input type=\"button\" id=\"btplay\" onClick={this.clickHandler} value=\"播放\"/>     */}\r\n                    <button onClick={this.clickHandler}>加载</button>\r\n                </div>\r\n                <div>\r\n                    <ul id=\"videobox\" style={{marginLeft:\"0\",overflowX:\"hidden\", listStyle:\"none\", width:\"100%\", whiteSpace:\"nowrap\", position:\"absolute\"}}>\r\n                        {this.state.items}\r\n                    </ul>\r\n                    <div style={{position:\"relative\", width:\"100%\"}}>\r\n                        <button onClick={this.clickLeft} style={{position:\"absolute\", left:\"0px\", top:\"150px\", width:\"20px\",height:\"40px\",borderStyle:\"none\"}}>◀</button>\r\n                        <button onClick={this.clickRight} style={{position:\"absolute\", right:\"0px\", top:\"150px\", width:\"20px\",height:\"40px\",borderStyle:\"none\"}}>▶</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n        }\r\n  }"]},"metadata":{},"sourceType":"module"}